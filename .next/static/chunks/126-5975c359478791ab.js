"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[126],{121:function(e,t,a){a.d(t,{default:function(){return u}});var r=a(7437),n=a(115),s=a(9376),i=a(2265),o=a(6478);function c(){return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,r.jsx)(o.E.div,{className:"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})})}function u(e){let{children:t,fallback:a}=e,{user:o,loading:u}=(0,n.aC)(),d=(0,s.useRouter)();return((0,i.useEffect)(()=>{u||o||d.push("/auth")},[o,u,d]),u||!o)?a||(0,r.jsx)(c,{}):(0,r.jsx)(r.Fragment,{children:t})}},2946:function(e,t,a){a.d(t,{default:function(){return f}});var r=a(7437),n=a(6478),s=a(2869),i=a(2660),o=a(8293),c=a(8728),u=a(7692),d=a(9376),l=a(115);function f(e){let{title:t,showBack:a,actions:f,onMenuClick:p}=e,m=(0,d.useRouter)(),{signOut:h,user:g}=(0,l.aC)();return(0,r.jsx)(n.E.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"sticky top-0 z-40 bg-background/80 backdrop-blur-sm border-b border-border",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[a&&(0,r.jsx)(s.z,{variant:"ghost",size:"sm",onClick:()=>m.back(),className:"p-2",children:(0,r.jsx)(i.Z,{className:"h-5 w-5"})}),p&&(0,r.jsx)(s.z,{variant:"ghost",size:"sm",onClick:p,className:"p-2",children:(0,r.jsx)(o.Z,{className:"h-5 w-5"})}),t&&(0,r.jsx)("h1",{className:"text-xl font-semibold text-foreground truncate",children:t})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[f,(0,r.jsx)(s.z,{variant:"ghost",size:"sm",onClick:()=>m.push("/settings"),className:"p-2",children:(0,r.jsx)(c.Z,{className:"h-5 w-5"})}),g&&(0,r.jsxs)(s.z,{variant:"outline",size:"sm",onClick:()=>h(),className:"ml-2",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-1"})," Logout"]})]})]})})}},2869:function(e,t,a){a.d(t,{z:function(){return u}});var r=a(7437),n=a(2265),s=a(7053),i=a(535),o=a(4508);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:u=!1,...d}=e,l=u?s.g7:"button";return(0,r.jsx)(l,{className:(0,o.cn)(c({variant:n,size:i,className:a})),ref:t,...d})});u.displayName="Button"},115:function(e,t,a){a.d(t,{Vo:function(){return j},aC:function(){return k},pL:function(){return I}});var r=a(2265),n=a(1466),s=a(4257);let i=async(e,t)=>(0,n.e5)(s.I8,e,t),o=async(e,t)=>(0,n.Xb)(s.I8,e,t),c=async()=>(0,n.w7)(s.I8),u=e=>(0,n.Aj)(s.I8,e);var d=a(5978);let l="users",f=e=>e.toDate().toISOString(),p=async e=>{let t=(0,d.JU)(s.db,l,e.uid),a=d.EK.now();await (0,d.pl)(t,{...e,createdAt:a,updatedAt:a})},m=async e=>{let t=(0,d.JU)(s.db,l,e),a=await (0,d.QT)(t);if(a.exists()){let e=a.data();return{...e,createdAt:f(e.createdAt),updatedAt:f(e.updatedAt)}}return null};var h=a(9376);let g=0,v=new Map,b=e=>{if(v.has(e))return;let t=setTimeout(()=>{v.delete(e),w({type:"REMOVE_TOAST",toastId:e})},1e6);v.set(e,t)},y=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?b(a):e.toasts.forEach(e=>{b(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},x=[],S={toasts:[]};function w(e){S=y(S,e),x.forEach(e=>{e(S)})}function A(e){let{...t}=e,a=(g=(g+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>w({type:"DISMISS_TOAST",toastId:a});return w({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>w({type:"UPDATE_TOAST",toast:{...e,id:a}})}}let j=(0,r.createContext)(void 0),k=()=>{let e=(0,r.useContext)(j);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},I=()=>{let[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(!0),{toast:s}=function(){let[e,t]=r.useState(S);return r.useEffect(()=>(x.push(t),()=>{let e=x.indexOf(t);e>-1&&x.splice(e,1)}),[e]),{...e,toast:A,dismiss:e=>w({type:"DISMISS_TOAST",toastId:e})}}(),d=(0,h.useRouter)();return(0,r.useEffect)(()=>{let e=u(async e=>{if(e)try{let a=await m(e.uid);if(!a){let t={uid:e.uid,email:e.email||"",name:e.displayName||"User",streak:0,lastLoggedDate:null,xpLevel:1};await p(t),a={...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}t(a)}catch(e){console.error("Error fetching user data:",e),s({title:"Error",description:"Failed to load user data",variant:"destructive"})}else t(null);n(!1)});return()=>e()},[s]),{user:e,loading:a,signIn:async(e,t)=>{try{n(!0),await i(e,t),s({title:"Welcome back!",description:"Successfully signed in"}),d.push("/dashboard")}catch(e){throw s({title:"Sign in failed",description:e.message,variant:"destructive"}),e}finally{n(!1)}},signUp:async(e,t,a)=>{try{n(!0);let r={uid:(await o(e,t)).user.uid,email:e,name:a,streak:0,lastLoggedDate:null,xpLevel:1};await p(r),s({title:"Account created!",description:"Welcome to FitTrack"}),d.push("/dashboard")}catch(e){throw s({title:"Sign up failed",description:e.message,variant:"destructive"}),e}finally{n(!1)}},signOut:async()=>{try{await c(),t(null),s({title:"Signed out",description:"See you next time!"}),d.push("/auth")}catch(e){throw s({title:"Sign out failed",description:e.message,variant:"destructive"}),e}}}}},4257:function(e,t,a){a.d(t,{I8:function(){return o},db:function(){return c}});var r=a(738),n=a(1466),s=a(5978);let i=(0,r.ZF)({apiKey:"AIzaSyBGi002vjHm9VJbXDOio6ARdmIM5smhHUM",authDomain:"fittrack-1d442.firebaseapp.com",projectId:"fittrack-1d442",storageBucket:"fittrack-1d442.firebasestorage.app",messagingSenderId:"668676349404",appId:"1:668676349404:web:07690b59d36d7716c4c319"}),o=(0,n.v0)(i),c=(0,s.ad)(i)},4508:function(e,t,a){a.d(t,{cn:function(){return s}});var r=a(1994),n=a(3335);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}}}]);