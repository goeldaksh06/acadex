(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{8211:function(e,t,a){Promise.resolve().then(a.bind(a,9367))},9367:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var s=a(7437),r=a(2265),n=a(9376),i=a(6478),l=a(115),o=a(2869),d=a(5186),u=a(6815),c=a(6070),f=a(9345),m=a(6337),p=a(7769),x=a(2208);function h(e){let{onSuccess:t}=e,[a,h]=(0,r.useState)(""),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),{signIn:w}=(0,l.aC)(),S=(0,n.useRouter)(),_=async e=>{e.preventDefault(),N(!0);try{await w(a,g),null==t||t(),S.push("/dashboard")}catch(e){console.error("Login failed:",e)}finally{N(!1)}};return(0,s.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,s.jsxs)(c.Zb,{className:"w-full max-w-md mx-auto card-gradient",children:[(0,s.jsxs)(c.Ol,{className:"text-center",children:[(0,s.jsx)(c.ll,{className:"text-2xl font-bold text-gradient",children:"Welcome Back"}),(0,s.jsx)(c.SZ,{children:"Sign in to continue your fitness journey"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"email",children:"Email"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(d.I,{id:"email",type:"email",placeholder:"Enter your email",value:a,onChange:e=>h(e.target.value),className:"pl-10",required:!0})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"password",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(d.I,{id:"password",type:y?"text":"password",placeholder:"Enter your password",value:g,onChange:e=>v(e.target.value),className:"pl-10 pr-10",required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>b(!y),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:y?(0,s.jsx)(p.Z,{className:"h-4 w-4"}):(0,s.jsx)(x.Z,{className:"h-4 w-4"})})]})]}),(0,s.jsx)(o.z,{type:"submit",disabled:j,className:"w-full btn-hero",children:j?"Signing in...":"Sign In"})]})})]})})}var g=a(2369);function v(e){let{onSuccess:t}=e,[a,h]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),[b,j]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[S,_]=(0,r.useState)(!1),[I,C]=(0,r.useState)(!1),{signUp:A}=(0,l.aC)(),E=(0,n.useRouter)(),k=async e=>{if(e.preventDefault(),b===N){C(!0);try{await A(v,b,a),null==t||t(),E.push("/setup")}catch(e){console.error("Registration failed:",e)}finally{C(!1)}}};return(0,s.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,s.jsxs)(c.Zb,{className:"w-full max-w-md mx-auto card-gradient",children:[(0,s.jsxs)(c.Ol,{className:"text-center",children:[(0,s.jsx)(c.ll,{className:"text-2xl font-bold text-gradient",children:"Join FitTrack"}),(0,s.jsx)(c.SZ,{children:"Create your account and start tracking your fitness journey"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"name",children:"Full Name"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(g.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(d.I,{id:"name",type:"text",placeholder:"Enter your full name",value:a,onChange:e=>h(e.target.value),className:"pl-10",required:!0})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"email",children:"Email"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(d.I,{id:"email",type:"email",placeholder:"Enter your email",value:v,onChange:e=>y(e.target.value),className:"pl-10",required:!0})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"password",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(d.I,{id:"password",type:S?"text":"password",placeholder:"Create a password",value:b,onChange:e=>j(e.target.value),className:"pl-10 pr-10",required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>_(!S),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:S?(0,s.jsx)(p.Z,{className:"h-4 w-4"}):(0,s.jsx)(x.Z,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(d.I,{id:"confirmPassword",type:"password",placeholder:"Confirm your password",value:N,onChange:e=>w(e.target.value),className:"pl-10",required:!0})]}),b!==N&&N&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:"Passwords do not match"})]}),(0,s.jsx)(o.z,{type:"submit",disabled:I||b!==N,className:"w-full btn-hero",children:I?"Creating account...":"Create Account"})]})})]})})}var y=a(3993),b=a(4508);let j=y.fC,N=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(y.aV,{ref:t,className:(0,b.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});N.displayName=y.aV.displayName;let w=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(y.xz,{ref:t,className:(0,b.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});w.displayName=y.xz.displayName;let S=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(y.VY,{ref:t,className:(0,b.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});function _(){let[e,t]=(0,r.useState)("login");return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",children:(0,s.jsx)("div",{className:"w-full max-w-xl",children:(0,s.jsxs)(j,{value:e,onValueChange:t,className:"w-full",children:[(0,s.jsxs)(N,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(w,{value:"login",children:"Sign In"}),(0,s.jsx)(w,{value:"register",children:"Register"})]}),(0,s.jsx)(S,{value:"login",className:"mt-6",children:(0,s.jsx)(h,{onSuccess:()=>t("login")})}),(0,s.jsx)(S,{value:"register",className:"mt-6",children:(0,s.jsx)(v,{onSuccess:()=>t("login")})})]})})})}S.displayName=y.VY.displayName},2869:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var s=a(7437),r=a(2265),n=a(7495),i=a(535),l=a(4508);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:d=!1,...u}=e,c=d?n.g7:"button";return(0,s.jsx)(c,{className:(0,l.cn)(o({variant:r,size:i,className:a})),ref:t,...u})});d.displayName="Button"},6070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return u},ll:function(){return o}});var s=a(7437),r=a(2265),n=a(4508);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});u.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},5186:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var s=a(7437),r=a(2265),n=a(4508);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},6815:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var s=a(7437),r=a(2265),n=a(6394),i=a(535),l=a(4508);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.f,{ref:t,className:(0,l.cn)(o(),a),...r})});d.displayName=n.f.displayName},115:function(e,t,a){"use strict";a.d(t,{Vo:function(){return S},aC:function(){return _},pL:function(){return I}});var s=a(2265),r=a(1466),n=a(4257);let i=async(e,t)=>(0,r.e5)(n.I8,e,t),l=async(e,t)=>(0,r.Xb)(n.I8,e,t),o=async()=>(0,r.w7)(n.I8),d=e=>(0,r.Aj)(n.I8,e);var u=a(5978);let c="users",f=e=>e.toDate().toISOString(),m=async e=>{let t=(0,u.JU)(n.db,c,e.uid),a=u.EK.now();await (0,u.pl)(t,{...e,createdAt:a,updatedAt:a})},p=async e=>{let t=(0,u.JU)(n.db,c,e),a=await (0,u.QT)(t);if(a.exists()){let e=a.data();return{...e,createdAt:f(e.createdAt),updatedAt:f(e.updatedAt)}}return null};var x=a(9376);let h=0,g=new Map,v=e=>{if(g.has(e))return;let t=setTimeout(()=>{g.delete(e),N({type:"REMOVE_TOAST",toastId:e})},1e6);g.set(e,t)},y=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?v(a):e.toasts.forEach(e=>{v(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},b=[],j={toasts:[]};function N(e){j=y(j,e),b.forEach(e=>{e(j)})}function w(e){let{...t}=e,a=(h=(h+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>N({type:"DISMISS_TOAST",toastId:a});return N({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>N({type:"UPDATE_TOAST",toast:{...e,id:a}})}}let S=(0,s.createContext)(void 0),_=()=>{let e=(0,s.useContext)(S);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},I=()=>{let[e,t]=(0,s.useState)(null),[a,r]=(0,s.useState)(!0),{toast:n}=function(){let[e,t]=s.useState(j);return s.useEffect(()=>(b.push(t),()=>{let e=b.indexOf(t);e>-1&&b.splice(e,1)}),[e]),{...e,toast:w,dismiss:e=>N({type:"DISMISS_TOAST",toastId:e})}}(),u=(0,x.useRouter)();return(0,s.useEffect)(()=>{let e=d(async e=>{if(e)try{let a=await p(e.uid);if(!a){let t={uid:e.uid,email:e.email||"",name:e.displayName||"User",streak:0,lastLoggedDate:null,xpLevel:1};await m(t),a={...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}t(a)}catch(e){console.error("Error fetching user data:",e),n({title:"Error",description:"Failed to load user data",variant:"destructive"})}else t(null);r(!1)});return()=>e()},[n]),{user:e,loading:a,signIn:async(e,t)=>{try{r(!0),await i(e,t),n({title:"Welcome back!",description:"Successfully signed in"}),u.push("/dashboard")}catch(e){throw n({title:"Sign in failed",description:e.message,variant:"destructive"}),e}finally{r(!1)}},signUp:async(e,t,a)=>{try{r(!0);let s={uid:(await l(e,t)).user.uid,email:e,name:a,streak:0,lastLoggedDate:null,xpLevel:1};await m(s),n({title:"Account created!",description:"Welcome to FitTrack"}),u.push("/dashboard")}catch(e){throw n({title:"Sign up failed",description:e.message,variant:"destructive"}),e}finally{r(!1)}},signOut:async()=>{try{await o(),t(null),n({title:"Signed out",description:"See you next time!"}),u.push("/auth")}catch(e){throw n({title:"Sign out failed",description:e.message,variant:"destructive"}),e}}}}},4257:function(e,t,a){"use strict";a.d(t,{I8:function(){return l},db:function(){return o}});var s=a(738),r=a(1466),n=a(5978);let i=(0,s.ZF)({apiKey:"your_api_key",authDomain:"your_auth_domain",projectId:"your_project_id",storageBucket:"your_storage_bucket",messagingSenderId:"your_sender_id",appId:"your_app_id"}),l=(0,r.v0)(i),o=(0,n.ad)(i)},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(1994),r=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[609,210,361,638,360,971,117,744],function(){return e(e.s=8211)}),_N_E=e.O()}]);