(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3590:function(e,t,s){Promise.resolve().then(s.bind(s,2403))},2403:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var a=s(7437),l=s(2946),r=s(6478),n=s(7648),i=s(9376),d=s(4938),c=s(3850),o=s(1047),u=s(6215);let x=[{path:"/dashboard",icon:d.Z,label:"Dashboard"},{path:"/split-builder",icon:c.Z,label:"Splits"},{path:"/workout/log",icon:o.Z,label:"Log"},{path:"/workout/history",icon:u.Z,label:"History"}];function m(e){let{currentPath:t}=e,s=(0,i.usePathname)();return(0,a.jsx)(r.E.nav,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"fixed bottom-0 left-0 right-0 z-50 bg-background/90 backdrop-blur-sm border-t border-border",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsx)("div",{className:"flex items-center justify-around h-16",children:x.map(e=>{let t=s===e.path,l=e.icon;return(0,a.jsxs)(n.default,{href:e.path,className:"\n                  flex flex-col items-center justify-center space-y-1 p-2 rounded-lg transition-colors relative\n                  ".concat(t?"text-primary":"text-muted-foreground hover:text-foreground","\n                "),children:[(0,a.jsxs)(r.E.div,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"relative",children:[(0,a.jsx)(l,{className:"h-5 w-5"}),t&&(0,a.jsx)(r.E.div,{layoutId:"activeIndicator",className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-primary rounded-full",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]}),(0,a.jsx)("span",{className:"text-xs font-medium",children:e.label})]},e.path)})})})})}var h=s(6070),p=s(6399);function f(e){let{streak:t,lastLoggedDate:s,loading:l}=e;return(0,a.jsxs)(h.Zb,{className:"card-gradient card-hover rounded-xl",children:[(0,a.jsx)(h.Ol,{className:"text-center",children:(0,a.jsxs)(h.ll,{className:"text-2xl font-bold text-gradient flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{role:"img","aria-label":"fire",children:"\uD83D\uDD25"})," Current Streak"]})}),(0,a.jsxs)(h.aY,{className:"text-center space-y-4",children:[(0,a.jsxs)(r.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"flex items-center justify-center space-x-3",children:[(0,a.jsx)(r.E.div,{className:t>0?"streak-fire":"",animate:t>0?{rotate:[0,-5,5,0]}:{},transition:{duration:2,repeat:1/0},children:(0,a.jsx)(p.Z,{className:"h-12 w-12 ".concat(t>0?"text-primary":"text-muted-foreground")})}),(0,a.jsx)("span",{className:"text-5xl font-extrabold text-primary",children:t}),(0,a.jsx)("span",{className:"text-xl text-muted-foreground",children:"days"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-lg font-medium text-foreground",children:0===t?"Start your fitness journey today!":1===t?"Great start! Keep it going!":t<7?"Building momentum!":t<30?"You're on fire!":"Incredible dedication!"}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-muted-foreground",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:(()=>{if(!s)return"No workouts logged yet";let e=new Date(s);return"Last workout: ".concat(e.toLocaleDateString())})()})]})]}),t>=7&&(0,a.jsx)(r.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.3},className:"px-4 py-2 bg-success/10 text-success rounded-lg border border-success/20",children:(0,a.jsxs)("span",{className:"text-sm font-medium",children:["\uD83C\uDF89 ",t>=30?"Legendary":"Weekly"," Streak Achievement!"]})})]})]})}var g=s(2869),j=s(5868),y=s(8896);function v(e){let{split:t,onEditClick:s,loading:l}=e;if(!t)return(0,a.jsx)(h.Zb,{className:"card-gradient",children:(0,a.jsx)(h.aY,{className:"pt-6 text-center",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(c.Z,{className:"h-12 w-12 mx-auto text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Split Selected"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first workout split to get started"}),(0,a.jsx)(g.z,{onClick:s,className:"btn-hero",children:"Create Split"})]})]})})});let n=t.days.reduce((e,t)=>e+t.exercises.length,0);return(0,a.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsxs)(h.Zb,{className:"card-gradient card-hover rounded-xl",children:[(0,a.jsxs)(h.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[(0,a.jsx)(h.ll,{className:"text-lg font-semibold",children:"Current Split"}),(0,a.jsx)(g.z,{variant:"ghost",size:"sm",onClick:s,className:"text-muted-foreground hover:text-foreground",children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)(h.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-primary mb-2",children:t.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Created on ",new Date(t.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[t.daysPerWeek," Days"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"per week"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[n," Exercises"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"total"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Workout Days:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.days.map(e=>(0,a.jsxs)("div",{className:"px-2 py-1 bg-primary/10 text-primary text-xs rounded-md border border-primary/20",children:["Day ",e.day," (",e.exercises.length," exercises)"]},e.day))})]})]})]})})}var N=s(2265),b=s(2451),w=s(407);function S(e){let{logs:t,onDateSelect:s,selectedDate:l}=e,[n,i]=(0,N.useState)(new Date),d=new Date(n.getFullYear(),n.getMonth(),1);n.getFullYear(),n.getMonth();let c=new Date(d);c.setDate(c.getDate()-c.getDay());let u=[],x=new Date(c);for(let e=0;e<42;e++)u.push(new Date(x)),x.setDate(x.getDate()+1);let m=new Set(t.map(e=>e.date)),p=e=>{null==s||s(e)},f=e=>e.getMonth()===n.getMonth(),j=e=>{let t=new Date;return e.toDateString()===t.toDateString()},y=e=>{let t=e.toISOString().split("T")[0];return m.has(t)},v=e=>l&&e.toDateString()===l.toDateString(),S=n.toLocaleDateString("en-US",{month:"long",year:"numeric"});return(0,a.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:(0,a.jsxs)(h.Zb,{className:"card-gradient rounded-xl",children:[(0,a.jsxs)(h.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,a.jsxs)(h.ll,{className:"text-lg font-semibold flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Workout Calendar"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.z,{variant:"outline",size:"sm",onClick:()=>{i(new Date(n.getFullYear(),n.getMonth()-1,1))},children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"text-sm font-medium min-w-[120px] text-center",children:S}),(0,a.jsx)(g.z,{variant:"outline",size:"sm",onClick:()=>{i(new Date(n.getFullYear(),n.getMonth()+1,1))},children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)(h.aY,{children:[(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:"p-2 text-center text-xs font-medium text-muted-foreground",children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1",children:u.map((e,t)=>{let s=f(e),l=j(e),n=y(e),i=v(e);return(0,a.jsxs)(r.E.button,{onClick:()=>p(e),className:"\n                    p-2 text-sm rounded-md transition-colors relative\n                    ".concat(s?"text-foreground":"text-muted-foreground/50","\n                    ").concat(l?"font-bold":"","\n                    ").concat(i?"bg-primary text-primary-foreground":"hover:bg-muted","\n                    ").concat(n&&!i?"bg-success/20 text-success-foreground border border-success/30":"","\n                  "),whileHover:{scale:1.1},whileTap:{scale:.95},children:[e.getDate(),n&&(0,a.jsx)("div",{className:"absolute bottom-0.5 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-success rounded-full"}),l&&!n&&(0,a.jsx)("div",{className:"absolute bottom-0.5 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-primary rounded-full"})]},t)})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-center space-x-4 text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-success rounded-full"}),(0,a.jsx)("span",{children:"Workout Completed"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full"}),(0,a.jsx)("span",{children:"Today"})]})]})]})]})})}var D=s(9322),k=s(1671),C=s(4372),Z=s(5978),I=s(4257),E=s(115);function O(e){let{canLog:t,currentSplit:s,onLogWorkout:l,loading:n}=e,{user:d}=(0,E.aC)(),[c,o]=(0,N.useState)(!1),[u,x]=(0,N.useState)(!1),m=(0,i.useRouter)(),p=s?t?u?{icon:(0,a.jsx)(k.Z,{className:"h-5 w-5"}),text:"Workout logged âœ…",disabled:!0,variant:"default"}:{icon:(0,a.jsx)(C.Z,{className:"h-5 w-5"}),text:"Log Today's Workout",disabled:!1,variant:"default"}:{icon:(0,a.jsx)(k.Z,{className:"h-5 w-5"}),text:"Already Logged Today",disabled:!0,variant:"secondary"}:{icon:(0,a.jsx)(D.Z,{className:"h-5 w-5"}),text:"No Split Selected",disabled:!0,variant:"secondary"},f=async()=>{if(d&&s&&!c&&t){o(!0);try{let e=new Date().toISOString().split("T")[0],t=(0,Z.JU)(I.db,"users",d.uid,"workouts",e);await (0,Z.pl)(t,{splitId:s.id,splitName:s.name,date:e,daysPerWeek:s.daysPerWeek,loggedAt:new Date().toISOString()}),x(!0),window.location.href="/dashboard",l&&l(),setTimeout(()=>x(!1),3e3)}catch(e){console.error("Error logging workout:",e)}finally{o(!1)}}};return(0,a.jsx)(h.Zb,{className:"card-gradient card-hover",children:(0,a.jsxs)(h.aY,{className:"pt-6",children:[!s&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(g.z,{variant:"outline",className:"w-full",onClick:()=>m.push("/split-builder"),children:"Create Your First Split"})}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsxs)("p",{children:["Current Split: ",(0,a.jsx)("span",{className:"font-medium text-foreground",children:s.name})]}),(0,a.jsxs)("p",{children:[s.daysPerWeek," days per week"]})]}),(0,a.jsx)(r.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,a.jsx)(g.z,{onClick:f,disabled:p.disabled||n||c,className:"w-full h-12 rounded-xl transition-colors ".concat(t?"btn-hero":""),variant:p.variant,children:(0,a.jsxs)("span",{className:"flex items-center space-x-2",children:[p.icon,(0,a.jsx)("span",{children:p.text})]})})})]})]})})}var T=s(121),W=s(5342);function L(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UTC",t=(0,W.zW)(new Date,e);return(0,W.WU)(t,"yyyy-MM-dd")}function A(){var e,t;let{user:s}=(0,E.aC)(),r=(0,i.useRouter)(),[n,d]=(0,N.useState)(null!==(e=null==s?void 0:s.streak)&&void 0!==e?e:0),[c,o]=(0,N.useState)(null!==(t=null==s?void 0:s.lastLoggedDate)&&void 0!==t?t:null),[u,x]=(0,N.useState)(null),[h,p]=(0,N.useState)([]),[j,y]=(0,N.useState)(!1);(0,N.useEffect)(()=>{var e,t;d(null!==(e=null==s?void 0:s.streak)&&void 0!==e?e:0),o(null!==(t=null==s?void 0:s.lastLoggedDate)&&void 0!==t?t:null)},[s]),(0,N.useEffect)(()=>{(async()=>{if(s)try{let u=(0,Z.hJ)(I.db,"users",s.uid,"splits"),m=(0,Z.IO)(u);try{m=(0,Z.IO)(u,(0,Z.Xo)("createdAt","desc"))}catch(e){}let h=await (0,Z.PL)(m);if(h.empty)x(null);else{var e,t,a,l,r,n,i,c;let d=h.docs[0],o=d.data();x({id:d.id,uid:s.uid,name:o.name||"My Split",daysPerWeek:o.daysPerWeek||0,days:o.days||[],isTemplate:o.isTemplate||!1,createdAt:(null===(a=o.createdAt)||void 0===a?void 0:null===(t=a.toDate)||void 0===t?void 0:null===(e=(l=t.call(a)).toISOString)||void 0===e?void 0:e.call(l))||new Date().toISOString(),updatedAt:(null===(i=o.updatedAt)||void 0===i?void 0:null===(n=i.toDate)||void 0===n?void 0:null===(r=(c=n.call(i)).toISOString)||void 0===r?void 0:r.call(c))||new Date().toISOString()})}let f=(0,Z.hJ)(I.db,"users",s.uid,"workouts"),g=(await (0,Z.PL)(f)).docs.map(e=>{var t,a,l,r;let n=e.data();return{id:e.id,uid:s.uid,date:n.date,splitId:n.splitId||"",completed:!!n.completed,createdAt:(null===(l=n.createdAt)||void 0===l?void 0:null===(a=l.toDate)||void 0===a?void 0:null===(t=(r=a.call(l)).toISOString)||void 0===t?void 0:t.call(r))||new Date().toISOString()}});p(g);let j=new Set(g.filter(e=>e.completed&&e.date).map(e=>e.date)),y=new Date(L()),v=0;for(let e=0;e<3650;e++){let t=new Date(y);t.setDate(t.getDate()-e);let s=t.toISOString().split("T")[0];if(j.has(s))v++;else break}d(v),o(g.length?g.sort((e,t)=>e.date>t.date?-1:1)[0].date:null)}catch(e){console.error(e)}})()},[s]);let b=(0,N.useMemo)(()=>{if(!u||!u.days||0===u.days.length)return null;let e=new Date().getDay()%u.days.length;return u.days[e]},[u]),w=async()=>{if(s)try{y(!0);let e=L();await (0,Z.pl)((0,Z.JU)(I.db,"users",s.uid,"workouts",e),{uid:s.uid,date:e,splitId:(null==u?void 0:u.id)||"",completed:!0,createdAt:(0,Z.Bt)()},{merge:!0}),d(t=>c===e?t:t+1||1),o(e),p(t=>t.find(t=>t.date===e)?t.map(t=>t.date===e?{...t,completed:!0}:t):[...t,{id:e,uid:s.uid,date:e,splitId:(null==u?void 0:u.id)||"",completed:!0,createdAt:new Date().toISOString()}])}finally{y(!1)}};return(0,a.jsx)(T.default,{children:(0,a.jsxs)("div",{className:"min-h-screen pb-20",children:[(0,a.jsx)(l.default,{title:"Dashboard"}),(0,a.jsxs)("main",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-1",children:[(0,a.jsx)(f,{streak:n,lastLoggedDate:c}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(g.z,{className:"w-full h-12 rounded-xl btn-hero",disabled:j,onClick:w,children:j?"Saving...":"Mark Workout Complete"})})]}),(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)(v,{split:u,onEditClick:()=>{(null==u?void 0:u.id)?r.push("/split-builder?edit=".concat(u.id)):r.push("/split-builder")}})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(S,{logs:h})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(O,{canLog:!1,currentSplit:null})})]}),b&&(0,a.jsxs)("div",{className:"rounded-xl border p-4",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-2",children:["Today's Workout (Day ",b.day,")"]}),(0,a.jsx)("ul",{className:"space-y-1 text-sm",children:b.exercises.map((e,t)=>(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e.name||"Exercise"}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[e.sets," x ",e.reps]})]},t))})]})]}),(0,a.jsx)(m,{currentPath:"/dashboard"})]})})}},6070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},ll:function(){return d}});var a=s(7437),l=s(2265),r=s(4508);let n=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});n.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...l})});i.displayName="CardHeader";let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...l})});o.displayName="CardContent",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter"}},function(e){e.O(0,[609,210,361,638,972,5,126,971,117,744],function(){return e(e.s=3590)}),_N_E=e.O()}]);